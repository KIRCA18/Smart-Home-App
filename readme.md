# Документација за проектот: **Smart Home Application**

## Содржина
1. [Технологии што ги користев](#1-технологии-што-ги-користев)
2. [Requirements (Барања)](#2-requirements-барања)
   - [За Windows](#за-windows)
   - [За Linux](#за-linux)
3. [Како да го стартувате проектот](#3-како-да-го-стартувате-проектот)
4. [Предизвици и проблеми со кои се соочив](#4-предизвици-и-проблеми-со-кои-се-соочив)

---

## 1. Технологии што ги користев
- **Backend:** Django (Python) – како серверска страна за управување со податоците и логиката на апликацијата.
- **Frontend:** HTML, CSS, JavaScript – за корисничкиот интерфејс.
- **MQTT (Mosquitto)** – за комуникација со IoT уредите.
- **ESP8266/ESP32** – како основен микроконтролер за контрола на уредите во паметниот дом.
- **SQLite** – база на податоци за чување на корисничките информации и податоци за уредите.

## 2. Requirements (Барања)
### За Windows:
1. **Python (верзија 3.11 или понова)**
   - Преземете и инсталирајте го Python од [официјалниот сајт](https://www.python.org/downloads/windows/).
   - При инсталација, проверете дали е избрано „Add Python to PATH“ за да можете да користите Python од терминал.

2. **Django библиотека (верзија 3.0 или понова)**
   - Отворете Command Prompt или PowerShell и инсталирајте ја Django библиотеката:
     ```bash
     pip install django
     ```

3. **MQTT брокер (Mosquitto)**
   - Преземете ја инсталационата датотека за Mosquitto од [Mosquitto официјалниот сајт](https://mosquitto.org/download/).
   - Инсталирајте го Mosquitto следејќи ги упатствата.

4. **SQLite база на податоци**
   - SQLite е интегриран во Python, нема потреба од посебна инсталација.

### За Linux:
1. **Python (верзија 3.11 или понова)**
   - Инсталирајте го Python преку терминалот:
     ```bash
     sudo apt-get install python3
     ```

2. **Django библиотека (верзија 3.0 или понова)**
   - Инсталирајте ја Django библиотеката со pip:
     ```bash
     pip install django
     ```

3. **MQTT брокер (Mosquitto)**
   - Инсталирајте го Mosquitto брокерот:
     ```bash
     sudo apt-get install mosquitto
     sudo apt-get install mosquitto-clients
     ```

4. **SQLite база на податоци**
   - SQLite е интегриран во Python, нема потреба од посебна инсталација.

Откако сите овие алатки ќе бидат инсталирани, можете да ги следите чекорите во поглавјето [**3. Како да го стартувате проектот**](#3-како-да-го-стартувате-проектот).

> **Забелешка:** Доколку веќе ги имате инсталирано сите потребни алатки, можете веднаш да преминете на поглавјето [**3. Како да го стартувате проектот**](#3-како-да-го-стартувате-проектот), и да ги следите упатствата од таму.

## 3. Како да го стартувате проектот
1. **Клонирање на проектот:**
   ```bash
   git clone https://github.com/KIRCA18/Smart-Home-App.git
   cd Smart-Home-App
   ```

2. **Инсталација на библиотеки (Backend):**
    - Креирајте виртуелна околина:
        ```bash
        python3 -m venv venv
        source venv/bin/activate  # За Linux/Mac
        venv\Scripts\activate  # За Windows
        ```
    - Инсталирајте ги сите потребни библиотеки од `requirements.txt`
        ```bash
        pip install -r requirements.txt
        ```
      
3. **Креирање на лозинки за Mosquitto:**
   - За креирање на корисничко име и лозинка, користете ја следнава команда за да создадете датотека со лозинки:
     ```bash
     mosquitto_passwd -c /path/to/passwordfile username
     ```
     Оваа команда ќе побара да внесете лозинка за соодветното корисничко име.
     
   - Ако сакате да додадете повеќе корисници на веќе постоечка датотека, користете ја следнава команда (без `-c`):
     ```bash
     mosquitto_passwd /path/to/passwordfile new_username
     ```

4. **Конфигурација на Mosquitto за да користи датотека за лозинки:**
   - Во конфигурациската датотека (`mosquitto.conf`), додајте ја следнава линија за да ја користите датотеката со лозинки:
     ```bash
     password_file /path/to/passwordfile
     ```

5. **Стартување на MQTT брокерот (Mosquitto):**
    - За да го стартувате Mosquitto со конфигурациска датотека, користете ја следнава команда:
        ```bash
        mosquitto -c /path/to/your/mosquitto.conf
        ```
        
6. **Миграции и стартување на серверот:**
    - Извршете ги миграциите за базата на податоци:
        ```bash
        python manage.py migrate
        ```
    - Стартувајте го Django серверот:
        ```bash
        python manage.py runserver
        ```

## 4. Предизвици и проблеми со кои се соочив
- **Интеграција на IoT уреди:** Најголемиот предизвик беше интеграцијата на ESP8266 микроконтролерите со MQTT и Django серверот. Се појавија проблеми со автентикација и CSRF грешки при испраќање POST барања од уредите кон серверот.
- **Синхронизација на податоците:** Предизвик беше и како да се осигура дека податоците од уредите се ажурираат во реално време на корисничкиот интерфејс.